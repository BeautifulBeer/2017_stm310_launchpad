/*
 * config_pwm.c
 *
 *  Created on: 2017. 12. 5.
 *      Author: hw_3
 */

#include "config_pwm.h"

void m_Init_PWM_TIM(TIM_TypeDef* TIMx){
	TIM_TimeBaseInitTypeDef time_;
	TIM_OCInitTypeDef time_oc_;
	time_.TIM_Period = PERIOD;
	time_.TIM_Prescaler = PRESCALAR;
	time_.TIM_ClockDivision = TIM_CKD_DIV1;
	time_.TIM_CounterMode = TIM_CounterMode_Up;
	TIM_TimeBaseInit(TIMx, &time_);
	TIM_ITConfig(TIMx, TIM_IT_Update, ENABLE);

	time_oc_.TIM_OCMode = TIM_OCMode_PWM1;
	time_oc_.TIM_OutputState = TIM_OutputState_Enable;
	time_oc_.TIM_OCPolarity = TIM_OCPolarity_High;
	time_oc_.TIM_Pulse = PUL_DUTY25;
	TIM_OC3Init(TIMx, &time_oc_);
	TIM_OC3PreloadConfig(TIMx, TIM_OCPreload_Enable);
	TIM_Cmd(TIMx, ENABLE);
}

void m_Init_TIM4_CH3_GPIOB(void){
	GPIO_InitTypeDef gpio_init_;
	gpio_init_.GPIO_Pin = GPIO_Pin_8;
	gpio_init_.GPIO_Mode = GPIO_Mode_AF_PP;
	gpio_init_.GPIO_Speed = GPIO_Speed_50MHz;
	GPIO_Init(GPIOB, &gpio_init_);
}

